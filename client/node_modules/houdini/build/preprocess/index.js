"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
// locals
const common_1 = require("../common");
const transforms_1 = __importDefault(require("./transforms"));
/**
 * The houdini processor automates a lot of boilerplate to make inline documents
 * work.
 *
 * It takes the same configuration values as the houdini config file as well as an
 * optional `configFile` parameter to specify the path to use to find houdini.config.js
 */
function houdiniPreprocessor(extraConfig) {
    return {
        async markup({ content, filename }) {
            // grab the config
            const config = await (0, common_1.getConfig)(extraConfig);
            // apply the transform pipeline
            const result = await (0, transforms_1.default)(config, { content, filename });
            return result;
        },
    };
}
exports.default = houdiniPreprocessor;
