"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const path_1 = __importDefault(require("path"));
const utils_1 = require("../../utils");
async function writeIndexFile(config, docs) {
    const docsToGenerate = docs.filter((doc) => doc.generateArtifact);
    // we want to export every artifact from the index file.
    let body = config.module === 'esm'
        ? docsToGenerate.reduce((content, doc) => content + `\n export { default as ${doc.name}} from './${doc.name}'`, '')
        : docsToGenerate.reduce((content, doc) => content + `\n${(0, utils_1.exportDefaultFrom)(`./${doc.name}`, doc.name)}`, utils_1.cjsIndexFilePreamble);
    // write the result to the artifact path we're configured to write to
    await (0, utils_1.writeFile)(path_1.default.join(config.artifactDirectory, 'index.js'), body);
}
exports.default = writeIndexFile;
