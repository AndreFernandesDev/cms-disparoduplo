import{createRequest as t,Client as e}from"@urql/core";export*from"@urql/core";import{make as n,subscribe as r,scan as o,switchMap as i,never as u,concat as a,fromValue as c,map as s}from"wonka";import{writable as f,derived as p}from"svelte/store";import{getContext as l,setContext as d}from"svelte";function v(){return v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v.apply(this,arguments)}function q(t){return n((function(e){return t.subscribe(e.next)}))}var x={fetching:!1,stale:!1,error:void 0,data:void 0,extensions:void 0};function b(t){return{isPaused$:t,pause:function(){t.set(!0)},resume:function(){t.set(!1)}}}function h(e){var n=t(e.query,e.variables),l=v({},{requestPolicy:e.requestPolicy},e.context),d=e.client.createRequestOperation("query",n,l),h=v({},x,{operation:d}),g=f(h,(function(){return y.unsubscribe})),m=f(!!e.pause),y=r((function(t){g.set(t)}))(o((function(t,e){return v({},t,e)}),h)(i((function(t){return t?u:a([c({fetching:!0,stale:!1}),s((function(t){return{fetching:!1,stale:!!t.stale,data:t.data,error:t.error,operation:t.operation,extensions:t.extensions}}))(e.client.executeRequestOperation(d)),c({fetching:!1})])}))(q(m))));return v({},p(g,(function(t,e){e(t)})),b(m))}function g(e,n){var i=t(e.query,e.variables),u=e.client.createRequestOperation("mutation",i,e.context),a=v({},x,{operation:u,fetching:!0}),c=f(a),l=r((function(t){c.set(t)}))(o((function(t,e){return v({},t,e,{data:void 0!==e.data?"function"==typeof n?n(t.data,e.data):e.data:t.data})}),a)(s((function(t){return{fetching:!1,stale:!!t.stale,data:t.data,error:t.error,operation:t.operation,extensions:t.extensions}}))(e.client.executeRequestOperation(u))));return p(c,(function(t,e){return e(t),l.unsubscribe}))}function m(e){var n=t(e.query,e.variables),l=e.client.createRequestOperation("subscription",n,e.context),d=v({},x,{operation:l}),h=f(d,(function(){return m.unsubscribe})),g=f(!!e.pause),m=r((function(t){h.set(t)}))(o((function(t,e){return v({},t,e)}),d)(i((function(t){return t?u:a([c({fetching:!0,stale:!1}),s((function(t){return{fetching:!0,stale:!!t.stale,data:t.data,error:t.error,operation:t.operation,extensions:t.extensions}}))(e.client.executeRequestOperation(l)),c({fetching:!1})])}))(q(g))));return v({},p(h,(function(t,e){e(t)})),b(g))}function y(){return l("$$_urql")}function O(t){d("$$_urql",t)}function R(t){var n=new e(t);return O(n),n}export{y as getContextClient,R as initContextClient,g as mutationStore,h as queryStore,O as setContextClient,m as subscriptionStore};
//# sourceMappingURL=urql-svelte.min.mjs.map
