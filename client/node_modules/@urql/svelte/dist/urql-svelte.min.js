Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@urql/core"),t=require("wonka"),n=require("svelte/store"),r=require("svelte");function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function i(e){return t.make((function(t){return e.subscribe(t.next)}))}var a={fetching:!1,stale:!1,error:void 0,data:void 0,extensions:void 0};function u(e){return{isPaused$:e,pause:function(){e.set(!0)},resume:function(){e.set(!1)}}}function s(e){r.setContext("$$_urql",e)}exports.getContextClient=function(){return r.getContext("$$_urql")},exports.initContextClient=function(t){var n=new e.Client(t);return s(n),n},exports.mutationStore=function(r,i){var u=e.createRequest(r.query,r.variables),s=r.client.createRequestOperation("mutation",u,r.context),c=o({},a,{operation:s,fetching:!0}),f=n.writable(c),l=t.subscribe((function(e){f.set(e)}))(t.scan((function(e,t){return o({},e,t,{data:void 0!==t.data?"function"==typeof i?i(e.data,t.data):t.data:e.data})}),c)(t.map((function(e){return{fetching:!1,stale:!!e.stale,data:e.data,error:e.error,operation:e.operation,extensions:e.extensions}}))(r.client.executeRequestOperation(s))));return n.derived(f,(function(e,t){return t(e),l.unsubscribe}))},exports.queryStore=function(r){var s=e.createRequest(r.query,r.variables),c=o({},{requestPolicy:r.requestPolicy},r.context),f=r.client.createRequestOperation("query",s,c),l=o({},a,{operation:f}),p=n.writable(l,(function(){return d.unsubscribe})),b=n.writable(!!r.pause),d=t.subscribe((function(e){p.set(e)}))(t.scan((function(e,t){return o({},e,t)}),l)(t.switchMap((function(e){return e?t.never:t.concat([t.fromValue({fetching:!0,stale:!1}),t.map((function(e){return{fetching:!1,stale:!!e.stale,data:e.data,error:e.error,operation:e.operation,extensions:e.extensions}}))(r.client.executeRequestOperation(f)),t.fromValue({fetching:!1})])}))(i(b))));return o({},n.derived(p,(function(e,t){t(e)})),u(b))},exports.setContextClient=s,exports.subscriptionStore=function(r){var s=e.createRequest(r.query,r.variables),c=r.client.createRequestOperation("subscription",s,r.context),f=o({},a,{operation:c}),l=n.writable(f,(function(){return b.unsubscribe})),p=n.writable(!!r.pause),b=t.subscribe((function(e){l.set(e)}))(t.scan((function(e,t){return o({},e,t)}),f)(t.switchMap((function(e){return e?t.never:t.concat([t.fromValue({fetching:!0,stale:!1}),t.map((function(e){return{fetching:!0,stale:!!e.stale,data:e.data,error:e.error,operation:e.operation,extensions:e.extensions}}))(r.client.executeRequestOperation(c)),t.fromValue({fetching:!1})])}))(i(p))));return o({},n.derived(l,(function(e,t){t(e)})),u(p))},Object.keys(e).forEach((function(t){"default"===t||exports.hasOwnProperty(t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return e[t]}})}));
//# sourceMappingURL=urql-svelte.min.js.map
